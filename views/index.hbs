<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-5">
      <div>
        <h3 class="d-inline">支出總金額: $</h3>
        <h1 class="d-inline text-danger">{{totalAmount}}</h1>
      </div>
      <div>
        <a class="btn btn-success" href="/expenses/new" role="button">新增支出</a>
      </div>
      {{!-- --}}
      <div class="row">
        <div class="col-4">
          <form action="/search" class="mt-2">
            <!-- 支出類型 -->
            <select class="form-select" name="categoryId" aria-label="Default select example"
              onchange="this.form.submit()">
              <option value="">全部類型</option>
              {{#if categoryId}}
              {{#each categories}}
              <option value="{{this._id}}" {{#ifCond this._id ../categoryId}} selected {{/ifCond}}>{{this.name}}
              </option>
              {{/each}}
              {{else}}
              {{#each categories}}
              <option value="{{this._id}}">{{this.name}}
              </option>
              {{/each}}
              {{/if}}
            </select>
          </form>
        </div>
      </div>
      {{!-- --}}
      <ul class="list-group mt-3">
        {{#each records}}
        <li class="list-group-item list-group-item-success">
          <div class="row align-items-center">
            <div class="col-8">
              <div class="row align-items-center g-0">
                <div class="col-2">
                  <i class="{{this.categoryInfo.icon}}"></i>
                </div>
                <div class="col-5">
                  <div>{{this.name}}</div>
                  <div>{{#dateFormat this.date}}{{/dateFormat}}</div>
                </div>
                <div class="col-5 text-end">{{this.amount}}</div>
              </div>
            </div>
            <div class="col-4 text-end">
              <a class="btn btn-info" href="/expenses/{{this._id}}/edit" role="button">修改</a>
              <form action="./expenses/{{ this._id }}?_method=DELETE" method="POST" style="display: inline;">
                <button class="btn btn-danger" type="submit">刪除</button>
              </form>
            </div>
          </div>
        </li>
        {{/each}}
      </ul>
    </div>
  </div>
</div>